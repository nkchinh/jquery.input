"use strict";!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e((t=t||self).jQuery)}(this,function(c){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t){return c.isArray(t)}function h(t){return!f(t)&&t instanceof Object}function p(t,e){return c.inArray(e,t)}function y(e,n){e&&Object.keys(e).forEach(function(t){return n(e[t],t,e)})}function v(t,e,n){return f(t)?(a=e,o=[],y(t,function(t,e,n){o.push(a(t,e,n))}),o):(i=e,u=n,r={},y(t,function(t,e,n){e=u?u(e,t):e,r[e]=i(t,e,n)}),r);var i,u,r,a,o}function g(t,e,n){return v(t,function(t){return t[e].apply(t,s(n||[]))})}c=c&&c.hasOwnProperty("default")?c.default:c;var e=function(){function t(){i(this,t),this.topics={}}return r(t,[{key:"publish",value:function(t,e){y(this.topics[t],function(t){t(e)})}},{key:"subscribe",value:function(t,e){this.topics[t]=this.topics[t]||[],this.topics[t].push(e)}},{key:"unsubscribe",value:function(n){y(this.topics,function(t){var e=p(t,n);-1!==e&&t.splice(e,1)})}}]),t}(),b=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this))).$self=t.$,e}return a(n,e),r(n,[{key:"getType",value:function(){throw'implement me (return type. "text", "radio", etc.)'}},{key:"$",value:function(t){return t?this.$self.find(t):this.$self}},{key:"disable",value:function(){this.$().prop("disabled",!0),this.publish("isEnabled",!1)}},{key:"enable",value:function(){this.$().prop("disabled",!1),this.publish("isEnabled",!0)}},{key:"equalTo",value:function(t,e){return t===e}},{key:"publishChange",value:function(t,e){var n=this.get();this.equalTo(n,this.oldValue)||this.publish("change",{e:t,domElement:e}),this.oldValue=n}}]),n}(),d=function(t){function e(){return i(this,e),l(this,o(e).apply(this,arguments))}return a(e,b),r(e,[{key:"get",value:function(){return this.$().val()}},{key:"set",value:function(t){this.$().val(t)}},{key:"clear",value:function(){this.set("")}},{key:"buildSetter",value:function(e){var n=this;return function(t){return e.call(n,t)}}}]),e}();function k(t,e){t=f(t)?t:[t],e=f(e)?e:[e];var n=!0;return t.length!==e.length?n=!1:y(t,function(t){-1===p(e,t)&&(n=!1)}),n}var m=function(t){function n(t){var e;return i(this,n),e=l(this,o(n).call(this,t)),t.type&&(e.$type=t.type),e.$().on("change keyup keydown",function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return this.$type||"text"}}]),n}(),$=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().on("change keyup keydown",function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"textarea"}}]),n}(),w=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"select"}}]),n}(),x=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"radio"}},{key:"get",value:function(){return this.$().filter(":checked").val()||null}},{key:"set",value:function(t){t?this.$().filter('[value="'.concat(t,'"]')).prop("checked",!0):this.$().each(function(){c(this).prop("checked",!1)})}}]),n}(),O=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"checkbox"}},{key:"get",value:function(){var n=[];return this.$().filter(":checked").each(function(t,e){n.push(c(e).val())}),n}},{key:"set",value:function(t){var e=this;t=f(t)?t:[t],this.$().each(function(){c(this).prop("checked",!1)}),y(t,function(t){e.$().filter('[value="'.concat(t,'"]')).prop("checked",!0)})}},{key:"equalTo",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];k(e)}}]),n}(),T=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,b),r(n,[{key:"getType",value:function(){return"file"}},{key:"get",value:function(){return(t=this.$().val().split("\\"))[t.length-1];var t}},{key:"clear",value:function(){this.$().each(function(t,e){c(e).wrap("<form>").closest("form").get(0).reset(),c(e).unwrap()})}}]),n}(),j=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().on("change",function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"button"}}]),n}(),C=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"hidden"}}]),n}(),E=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"range"}}]),n}(),A=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,d),r(n,[{key:"getType",value:function(){return"select[multiple]"}},{key:"get",value:function(){return this.$().val()||[]}},{key:"set",value:function(t){var e;e=""===t?[]:f(t)?t:[t],this.$().val(e)}},{key:"equalTo",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];k(e)}}]),n}(),_=function(t){function n(t){var e;return i(this,n),(e=l(this,o(n).call(this,t))).$().change(function(t){return e.publishChange(t,t.target)}),e}return a(n,b),r(n,[{key:"getType",value:function(){return"file[multiple]"}},{key:"get",value:function(){var t,e=this.$().get(0).files||[],n=[];for(t=0;t<(e.length||0);t+=1)n.push(e[t].name);return n}},{key:"clear",value:function(){this.$().each(function(t,e){c(e).wrap("<form>").closest("form").get(0).reset(),c(e).unwrap()})}}]),n}();function q(t){var r={},a=t.$,n=t.constructorOverride||{button:j,range:E,textarea:$,select:w,"select[multiple]":A,radio:x,checkbox:O,file:T,"file[multiple]":_,hidden:C},o=function(t,e){return-1<Object.keys(n).indexOf(t)?new n[t]({$:e}):new m({type:t,$:e})},e=function(u,t){(h(t)?t:a.find(t)).each(function(t,e){var n=c(e),i=n.attr("name");r[i]=o(u||n.attr("type"),n)})},i=function(e,t){var n=[],i=h(t)?t:a.find(t);h(t)?r[i.attr("name")]=o(e,i):(i.each(function(){var t=c(this).attr("name");-1===p(n,t)&&n.push(t)}),y(n,function(t){r[t]=o(e,a.find('input[name="'.concat(t,'"]')))}))};return a.is("input, select, textarea")?a.is('input[type="button"], button, input[type="submit"]')?e("button",a):a.is("textarea")?e("textarea",a):!a.is('input[type="text"]')&&!a.is("input")||a.attr("type")?a.is('input[type="password"]')?e("password",a):a.is('input[type="email"]')?e("email",a):a.is('input[type="url"]')?e("url",a):a.is('input[type="range"]')?e("range",a):a.is("select")?a.is("[multiple]")?e("select[multiple]",a):e("select",a):a.is('input[type="file"]')?a.is("[multiple]")?e("file[multiple]",a):e("file",a):a.is('input[type="hidden"]')?e("hidden",a):a.is('input[type="radio"]')?i("radio",a):a.is('input[type="checkbox"]')?i("checkbox",a):a.is("input[type]")?i(a.attr("type"),a):e("text",a):e("text",a):(e("button",'input[type="button"], button, input[type="submit"]'),e("range",'input[type="range"]'),e("textarea","textarea"),e("select","select:not([multiple])"),e("select[multiple]","select[multiple]"),e("file",'input[type="file"]:not([multiple])'),e("file[multiple]",'input[type="file"][multiple]'),e("hidden",'input[type="hidden"]'),i("radio",'input[type="radio"]'),i("checkbox",'input[type="checkbox"]'),e(void 0,'input[type]:not([type="file"],[type="hidden"],[type="radio"],[type="checkbox"])')),r}c.fn.inputVal=function(t){var e=c(this),n=q({$:e});return e.is("input, textarea, select")?void 0===t?n[e.attr("name")].get():(n[e.attr("name")].set(t),e):void 0===t?g(n,"get"):(y(t,function(t,e){n[e]&&n[e].set(t)}),e)},c.fn.inputOnChange=function(e){var t=c(this);return y(q({$:t}),function(t){t.subscribe("change",function(t){e.call(t.domElement,t.e)})}),t},c.fn.inputDisable=function(){var t=c(this);return g(q({$:t}),"disable"),t},c.fn.inputEnable=function(){var t=c(this);return g(q({$:t}),"enable"),t},c.fn.inputClear=function(){var t=c(this);return g(q({$:t}),"clear"),t}});
